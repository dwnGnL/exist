"use strict";for(var productFill=document.querySelectorAll(".product-color__button[data-color]"),productBorder=document.querySelectorAll(".product-color__button[data-border-color]"),i=0;i<productFill.length;i++)productFill[i].addEventListener("click",function(){for(var e=0;e<productFill.length;e++)productFill[e].classList.remove("product-color__button--active");for(var t=document.querySelectorAll(".popular-products__button"),o=0;o<t.length;o++)t[o].classList.remove("popular-products__button--active");this.classList.add("product-color__button--active");var r=this.getAttribute("data-color"),c=document.querySelector(".product-color__button--active[data-border-color]").getAttribute("data-border-color");document.querySelector("#product-photo").setAttribute("src","/assets/template/img/".concat(r,"-").concat(c,".png")),document.querySelector("#product-photo-original").setAttribute("href","/assets/template/img/".concat(r,"-").concat(c,".png")),document.querySelector("#product-photo-mobile").setAttribute("src","/assets/template/img/".concat(r,"-").concat(c,".png")),document.querySelector("#product-photo-original-mobile").setAttribute("href","/assets/template/img/".concat(r,"-").concat(c,".png"))});for(var _i=0;_i<productBorder.length;_i++)productBorder[_i].addEventListener("click",function(){for(var e=0;e<productBorder.length;e++)productBorder[e].classList.remove("product-color__button--active");for(var t=document.querySelectorAll(".popular-products__button"),o=0;o<t.length;o++)t[o].classList.remove("popular-products__button--active");this.classList.add("product-color__button--active");var r=this.getAttribute("data-border-color"),c=document.querySelector(".product-color__button--active[data-color]").getAttribute("data-color");document.querySelector("#product-photo").setAttribute("src","/assets/template/img/".concat(c,"-").concat(r,".png")),document.querySelector("#product-photo-original").setAttribute("href","/assets/template/img/".concat(c,"-").concat(r,".png")),document.querySelector("#product-photo-mobile").setAttribute("src","/assets/template/img/".concat(c,"-").concat(r,".png")),document.querySelector("#product-photo-original-mobile").setAttribute("href","/assets/template/img/".concat(c,"-").concat(r,".png"))});for(var popularProducts=document.querySelectorAll(".popular-products__button"),_i2=0;_i2<popularProducts.length;_i2++)popularProducts[_i2].addEventListener("click",function(){for(var e=0;e<popularProducts.length;e++)popularProducts[e].classList.remove("popular-products__button--active");this.classList.add("popular-products__button--active");var t=this.getAttribute("data-photo");document.querySelector("#product-photo").setAttribute("src","/assets/template/img/".concat(t,".png")),document.querySelector("#product-photo-original").setAttribute("href","/assets/template/img/".concat(t,".png")),document.querySelector("#product-photo-mobile").setAttribute("src","/assets/template/img/".concat(t,".png")),document.querySelector("#product-photo-mobile-original").setAttribute("href","/assets/template/img/".concat(t,".png"));for(var o=t.split("-"),r=document.querySelectorAll(".product-color__button[data-color]"),c=document.querySelectorAll(".product-color__button[data-border-color]"),l=0;l<r.length;l++)r[l].classList.remove("product-color__button--active"),r[l].getAttribute("data-color")===o[0]&&r[l].classList.add("product-color__button--active");for(var a=0;a<c.length;a++)c[a].classList.remove("product-color__button--active"),c[a].getAttribute("data-border-color")===o[1]&&c[a].classList.add("product-color__button--active")});for(var radioColor=document.querySelectorAll("input[name=color]"),_i3=0;_i3<radioColor.length;_i3++)radioColor[_i3].addEventListener("change",function(){setColor(this.value),document.querySelector("#select-color").classList.remove("show")});function setColor(e){var t=document.querySelector(".form-order__input--color");switch(t.classList.remove("form-order__input--color--black"),t.classList.remove("form-order__input--color--gray"),t.classList.remove("form-order__input--color--brown"),t.classList.remove("form-order__input--color--beige"),t.classList.remove("form-order__input--color--purple"),t.classList.remove("form-order__input--color--blue"),t.classList.remove("form-order__input--color--red"),t.classList.remove("form-order__input--color--green"),e){case"black":t.classList.add("form-order__input--color--black");break;case"gray":t.classList.add("form-order__input--color--gray");break;case"brown":t.classList.add("form-order__input--color--brown");break;case"beige":t.classList.add("form-order__input--color--beige");break;case"purple":t.classList.add("form-order__input--color--purple");break;case"blue":t.classList.add("form-order__input--color--blue");break;case"red":t.classList.add("form-order__input--color--red");break;case"green":t.classList.add("form-order__input--color--green")}}for(var radioBorderColor=document.querySelectorAll("input[name=border-color]"),_i4=0;_i4<radioBorderColor.length;_i4++)radioBorderColor[_i4].addEventListener("change",function(){setBorderColor(this.value),document.querySelector("#select-border-color").classList.remove("show")});for(var radioCollection=document.querySelectorAll("input[name=collection]"),_i5=0;_i5<radioCollection.length;_i5++)radioCollection[_i5].addEventListener("change",function(){setBorderColor(this.value),document.querySelector("#select-collection").classList.remove("show")});function setBorderColor(e){var t=document.querySelector(".form-order__input--border-color");switch(t.classList.remove("form-order__input--border-color--white"),t.classList.remove("form-order__input--border-color--black"),t.classList.remove("form-order__input--border-color--gray"),t.classList.remove("form-order__input--border-color--brown"),t.classList.remove("form-order__input--border-color--beige"),t.classList.remove("form-order__input--border-color--pink"),t.classList.remove("form-order__input--border-color--blue"),t.classList.remove("form-order__input--border-color--red"),t.classList.remove("form-order__input--border-color--yellow"),e){case"white":t.classList.add("form-order__input--border-color--white");break;case"black":t.classList.add("form-order__input--border-color--black");break;case"gray":t.classList.add("form-order__input--border-color--gray");break;case"brown":t.classList.add("form-order__input--border-color--brown");break;case"beige":t.classList.add("form-order__input--border-color--beige");break;case"pink":t.classList.add("form-order__input--border-color--pink");break;case"blue":t.classList.add("form-order__input--border-color--blue");break;case"red":t.classList.add("form-order__input--border-color--red");break;case"yellow":t.classList.add("form-order__input--border-color--yellow")}}for(var checkboxAdditionally=document.querySelectorAll("[data-additionally]"),_i6=0;_i6<checkboxAdditionally.length;_i6++)checkboxAdditionally[_i6].addEventListener("change",function(){setCost()});for(var radioAdditionally=document.querySelectorAll("input[name=collection]"),fieldAdditionally3=document.querySelector("#field-additionally-3"),_i7=0;_i7<radioAdditionally.length;_i7++)radioAdditionally[_i7].addEventListener("change",function(){document.querySelector("#select-collection .form-order__placeholder").style.fontSize="12px";var e=this.value;document.querySelector("#select-collection .form-order__placeholder").textContent=e,"field-collection-2"==this.getAttribute("id")?fieldAdditionally3.removeAttribute("disabled"):(fieldAdditionally3.setAttribute("disabled","true"),fieldAdditionally3.checked=!1),setCost()});var selectYears=document.querySelector("#select-year"),selectCarBrand=document.querySelector("#select-car-brand"),selectCarModel=document.querySelector("#select-car-model");function getCarModels(e){$.ajax({type:"POST",url:"/assets/cars/getCarModels.php",data:{carBrand:e},success:function(e){var t=document.querySelectorAll("#select-car-model option");console.log(t.length);for(var o=1;o<t.length;o++)t[o].remove();e=JSON.parse(e);for(var r=0;r<e.length;r++)document.querySelector("#select-car-model").append(new Option(e[r],e[r]))}})}function additionallySum(){for(var e=document.querySelectorAll("[data-additionally]"),t=0,o=0;o<e.length;o++)e[o].checked&&(t+=Number(e[o].getAttribute("data-price")));return t}selectYears.addEventListener("focus",function(){document.querySelector(".form-order__years-wrap").classList.add("open")}),selectYears.addEventListener("blur",function(){document.querySelector(".form-order__years-wrap").classList.remove("open")}),selectYears.addEventListener("change",function(){document.querySelector(".form-order__years-wrap").classList.remove("open"),document.querySelector("#select-year").blur()}),selectCarBrand.addEventListener("focus",function(){document.querySelector(".form-order__car-brand-wrap").classList.add("open")}),selectCarBrand.addEventListener("blur",function(){document.querySelector(".form-order__car-brand-wrap").classList.remove("open")}),selectCarBrand.addEventListener("change",function(){document.querySelector(".form-order__car-brand-wrap").classList.remove("open"),document.querySelector("#select-car-brand").blur(),document.querySelector("#select-car-model").removeAttribute("disabled"),getCarModels(this.options[this.selectedIndex].value)}),selectCarModel.addEventListener("focus",function(){document.querySelector(".form-order__car-model-wrap").classList.add("open")}),selectCarModel.addEventListener("blur",function(){document.querySelector(".form-order__car-model-wrap").classList.remove("open")}),selectCarModel.addEventListener("change",function(){document.querySelector(".form-order__car-model-wrap").classList.remove("open"),document.querySelector("#select-car-model").blur()}),document.querySelector("#field-additionally-5").addEventListener("change",function(){this.checked?document.querySelector("input[name=additionally-5-count]").removeAttribute("disabled"):document.querySelector("input[name=additionally-5-count]").setAttribute("disabled",!0)}),document.querySelector("#field-additionally-6").addEventListener("change",function(){this.checked?document.querySelector("input[name=additionally-6-count]").removeAttribute("disabled"):document.querySelector("input[name=additionally-6-count]").setAttribute("disabled",!0)});for(var buttonPlus=document.querySelectorAll(".form-order__btn-num--plus"),buttonMinus=document.querySelectorAll(".form-order__btn-num--minus"),_i11=0;_i11<buttonPlus.length;_i11++)buttonPlus[_i11].addEventListener("click",function(){var e=this.parentNode.querySelector("input[type=number]").value;this.parentNode.querySelector("input[type=number]").value=0<e?++e:1,additionally5Sum(),additionally6Sum(),setCost()});for(var _i12=0;_i12<buttonMinus.length;_i12++)buttonMinus[_i12].addEventListener("click",function(){var e=this.parentNode.querySelector("input[type=number]").value;this.parentNode.querySelector("input[type=number]").value=1<e?--e:1,additionally5Sum(),additionally6Sum(),setCost()});function setCost(){document.querySelector("#total-cost").innerHTML=Number(collectionCost())+Number(additionallySum())}function collectionCost(){for(var e=document.querySelectorAll("input[name=collection]"),t=0;t<e.length;t++)if(e[t].checked)return e[t].getAttribute("data-price")}function additionally5Sum(){var e=document.querySelector("#field-additionally-5").getAttribute("data-price-one"),t=document.querySelector("input[name=additionally-5-count]").value;document.querySelector("#field-additionally-5").setAttribute("data-price",e*t)}function additionally6Sum(){var e=document.querySelector("#field-additionally-6").getAttribute("data-price-one"),t=document.querySelector("input[name=additionally-6-count]").value;document.querySelector("#field-additionally-6").setAttribute("data-price",e*t)}document.querySelector("#select-color .form-order__close").addEventListener("click",function(){document.querySelector("#select-color").classList.contains("show")?document.querySelector("#select-color").classList.remove("show"):document.querySelector("#select-color").classList.add("show")}),document.querySelector("#select-border-color .form-order__close").addEventListener("click",function(){document.querySelector("#select-border-color").classList.contains("show")?document.querySelector("#select-border-color").classList.remove("show"):document.querySelector("#select-border-color").classList.add("show")}),document.querySelector("#select-collection .form-order__close").addEventListener("click",function(){document.querySelector("#select-collection").classList.contains("show")?document.querySelector("#select-collection").classList.remove("show"):document.querySelector("#select-collection").classList.add("show")}),document.querySelector("#select-additionally .form-order__close").addEventListener("click",function(){document.querySelector("#select-additionally").classList.contains("show")?document.querySelector("#select-additionally").classList.remove("show"):document.querySelector("#select-additionally").classList.add("show")}),jQuery(document).ready(function(l){function e(e){l(e).validate({focusInvalid:!1,focusCleanup:!0,onkeyup:!1,onfocusout:!0,submitHandler:function(){!function(e){var t=l(e).serialize();l.ajax({url:"/assets/template/php/submit.php",type:"POST",data:t,beforeSend:function(){},success:function(){if ($(e).attr('id') == 'kak-zakazat-form'){ym(56225929, 'reachGoal', 'DANNIE');}l.fancybox.close(),l.fancybox.open({src:"#popup-success",type:"inline",autoFocus:!1})},error:function(){l.fancybox.close(),l.fancybox.open({src:"#popup-error",type:"inline",autoFocus:!1})},complete:function(){}})}(e)},rules:{phone:{required:!0,minlength:18}},errorPlacement:function(e,t){t.is(":radio")||t.is(":checkbox")?e.insertAfter(t.parent()).animate({opacity:1},100):e.insertAfter(t).animate({opacity:1},100)}})}l(document).mouseup(function(e){var t=l("#select-color");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("show");var o=l("#select-border-color");o.is(e.target)||0!==o.has(e.target).length||o.removeClass("show");var r=l("#select-collection");r.is(e.target)||0!==r.has(e.target).length||r.removeClass("show");var c=l("#select-additionally");c.is(e.target)||0!==c.has(e.target).length||c.removeClass("show")}),l("input[type=tel]").mask("+7 (000) 000-00-00"),l("input[type=tel]").focus(function(){(""==l(this).val()||l(this).val().length<4)&&l(this).val("+7 (")}),l("input[type=tel]").blur(function(){("+7 ("==l(this).val()||l(this).val().length<4)&&l(this).val("")}),l("input[name=year]").mask("0000"),l("input[name=additionally-5-count]").mask("00"),l("input[name=additionally-6-count]").mask("00"),l.extend(l.validator.messages,{required:"Это поле необходимо заполнить.",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корректный адрес электронной почты.",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число.",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пожалуйста, введите такое же значение ещё раз.",extension:"Пожалуйста, выберите файл с правильным расширением.",maxlength:l.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:l.validator.format("Пожалуйста, укажите корректный телефон."),rangelength:l.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:l.validator.format("Пожалуйста, введите число от {0} до {1}."),max:l.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:l.validator.format("Пожалуйста, укажите корректный телефон.")}),l("form").each(function(){e(l(this))})}),function(o){o.fn.pageScroll=function(t){t=o.extend({speed:1500,offset:0},t);return this.each(function(){o(this).click(function(e){e.preventDefault(),void 0!==o(this).attr("data-pagescroll-speed")&&""!==o(this).attr("data-pagescroll-speed")&&(t.speed=parseInt(o(this).attr("data-pagescroll-speed"))),void 0!==o(this).attr("data-pagescroll-offset")&&""!==o(this).attr("data-pagescroll-offset")&&(t.offset=parseInt(o(this).attr("data-pagescroll-offset"))),o("html, body").animate({scrollTop:o(o(this).attr("data-pagescroll")).offset().top-t.offset},t.speed,"swing")})})}}(jQuery),$("[data-pagescroll]").pageScroll();